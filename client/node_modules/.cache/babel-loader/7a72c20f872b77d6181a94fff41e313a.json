{"ast":null,"code":"import _regeneratorRuntime from\"/Users/CHLY/Downloads/xchangepack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/CHLY/Downloads/xchangepack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/CHLY/Downloads/xchangepack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import validator from\"validator\";import axios from\"axios\";var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});export default function Register(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),emailError=_useState6[0],setEmailError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),passwordError=_useState10[0],setPasswordError=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),passwordConfirmation=_useState12[0],setPasswordConfirmation=_useState12[1];var handleOnSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var errors,data,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setEmailError(null);setPasswordError(null);errors=0;if(!validator.isEmail(email)){setEmailError(\"Email must be in correct format\");errors++;}if(password!==passwordConfirmation){setPasswordError(\"Passwords don't match.\");errors++;}if(!errors){_context.next=8;break;}return _context.abrupt(\"return\");case 8:data={name:name,email:email,password:password};_context.prev=9;_context.next=12;return axios.post(\"/api/auth/register\",data);case 12:_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);message=_context.t0.response.data.message;if(message===\"email_exists\"){setEmailError(\"User with this email already exists\");}case 18:case\"end\":return _context.stop();}}},_callee,null,[[9,14]]);}));return function handleOnSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Avatar,{className:classes.avatar},/*#__PURE__*/React.createElement(LockOutlinedIcon,null)),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Register\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,onSubmit:handleOnSubmit},/*#__PURE__*/React.createElement(TextField,{required:true,fullWidth:true,label:\"Name\",autoFocus:true,value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/React.createElement(TextField,{required:true,fullWidth:true,label:\"Email Address\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},error:!!emailError,helperText:emailError}),/*#__PURE__*/React.createElement(TextField,{required:true,fullWidth:true,label:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},error:!!passwordError,helperText:passwordError}),/*#__PURE__*/React.createElement(TextField,{required:true,fullWidth:true,label:\"Password Confirmation\",type:\"password\",value:passwordConfirmation,onChange:function onChange(e){return setPasswordConfirmation(e.target.value);}}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit},\"Sign In\"))));}","map":{"version":3,"sources":["/Users/CHLY/Downloads/xchangepack/client/src/components/Ask/Pages/Auth/Register.js"],"names":["React","useState","Avatar","Button","CssBaseline","TextField","LockOutlinedIcon","Typography","makeStyles","Container","validator","axios","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Register","classes","name","setName","email","setEmail","emailError","setEmailError","password","setPassword","passwordError","setPasswordError","passwordConfirmation","setPasswordConfirmation","handleOnSubmit","event","preventDefault","errors","isEmail","data","post","message","response","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport validator from \"validator\";\nimport axios from \"axios\";\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nexport default function Register() {\n    const classes = useStyles();\n\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [emailError, setEmailError] = useState(null);\n    const [password, setPassword] = useState(\"\");\n    const [passwordError, setPasswordError] = useState(null);\n    const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\n\n    const handleOnSubmit = async event => {\n        event.preventDefault();\n        setEmailError(null);\n        setPasswordError(null);\n        let errors = 0;\n\n        if (!validator.isEmail(email))\n        {\n            setEmailError(\"Email must be in correct format\");\n            errors++;\n        }\n\n        if (password !== passwordConfirmation) {\n            setPasswordError(\"Passwords don't match.\");\n            errors++;\n        }\n\n        if (errors) return;\n\n        const data = {\n            name,\n            email,\n            password\n        };\n\n        try {\n            await axios.post(\"/api/auth/register\", data);\n        } catch (e) {\n            const message = e.response.data.message;\n            if (message === \"email_exists\") {\n                setEmailError(\"User with this email already exists\");\n            }\n        }\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Register\n                </Typography>\n                <form className={classes.form} onSubmit={handleOnSubmit}>\n                    <TextField\n                        required\n                        fullWidth\n                        label=\"Name\"\n                        autoFocus\n                        value={name}\n                        onChange={e => setName(e.target.value)}\n                    />\n                    <TextField\n                        required\n                        fullWidth\n                        label=\"Email Address\"\n                        value={email}\n                        onChange={e => setEmail(e.target.value)}\n                        error={!!emailError}\n                        helperText={emailError}\n                    />\n                    <TextField\n                        required\n                        fullWidth\n                        label=\"Password\"\n                        type=\"password\"\n                        value={password}\n                        onChange={e => setPassword(e.target.value)}\n                        error={!!passwordError}\n                        helperText={passwordError}\n                    />\n                    <TextField\n                        required\n                        fullWidth\n                        label=\"Password Confirmation\"\n                        type=\"password\"\n                        value={passwordConfirmation}\n                        onChange={e => setPasswordConfirmation(e.target.value)}\n                    />\n                    <Button\n                        type=\"submit\"\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.submit}\n                    >\n                        Sign In\n                    </Button>\n                </form>\n            </div>\n        </Container>\n    );\n}"]},"metadata":{},"sourceType":"module"}