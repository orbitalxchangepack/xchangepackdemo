{"ast":null,"code":"import _regeneratorRuntime from\"/Users/CHLY/Downloads/xchangepack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/CHLY/Downloads/xchangepack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/CHLY/Downloads/xchangepack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import AuthContext from\"../../Contexts/AuthContext\";import Avatar from\"@material-ui/core/Avatar\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});export default function SignIn(){var history=useHistory();var _useContext=useContext(AuthContext),setUser=_useContext.setUser;var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),emailError=_useState4[0],setEmailError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var handleOnSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,response,_response$data,token,user,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setEmailError(null);setPasswordError(null);data={email:email,password:password};_context.prev=4;_context.next=7;return axios.post(\"/api/auth/login\",data);case 7:response=_context.sent;_response$data=response.data,token=_response$data.token,user=_response$data.user;localStorage.setItem(\"token\",token);setUser(user);history.push(\"/\");_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);message=_context.t0.response.data.message;if(message===\"user_not_found\"){setEmailError(\"No users with this email were found\");}else if(message===\"wrong_password\"){setPasswordError(\"Wrong password\");}case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function handleOnSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Avatar,{className:classes.avatar},/*#__PURE__*/React.createElement(LockOutlinedIcon,null)),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Sign in\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,onSubmit:handleOnSubmit},/*#__PURE__*/React.createElement(TextField,{required:true,fullWidth:true,label:\"Email Address\",autoFocus:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);},error:!!emailError,helperText:emailError}),/*#__PURE__*/React.createElement(TextField,{required:true,fullWidth:true,label:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},error:!!passwordError,helperText:passwordError}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit},\"Sign In\"))));}","map":{"version":3,"sources":["/Users/CHLY/Downloads/xchangepack/client/src/components/Ask/Pages/Auth/Login.js"],"names":["React","useState","useContext","AuthContext","Avatar","Button","CssBaseline","TextField","LockOutlinedIcon","Typography","makeStyles","Container","axios","useHistory","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","SignIn","history","setUser","classes","email","setEmail","emailError","setEmailError","password","setPassword","passwordError","setPasswordError","handleOnSubmit","e","preventDefault","data","post","response","token","user","localStorage","setItem","push","message","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport AuthContext from \"../../Contexts/AuthContext\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignIn() {\n  const history = useHistory();\n  const { setUser } = useContext(AuthContext);\n  const classes = useStyles();\n  const [email, setEmail] = useState(\"\");\n  const [emailError, setEmailError] = useState(null);\n  const [password, setPassword] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(null);\n\n  const handleOnSubmit = async (e) => {\n    e.preventDefault();\n    setEmailError(null);\n    setPasswordError(null);\n\n    const data = {\n      email,\n      password,\n    };\n\n    try {\n      const response = await axios.post(\"/api/auth/login\", data);\n      const { token, user } = response.data;\n      localStorage.setItem(\"token\", token);\n      setUser(user);\n      history.push(\"/\");\n    } catch (e) {\n      const message = e.response.data.message;\n      if (message === \"user_not_found\") {\n        setEmailError(\"No users with this email were found\");\n      } else if (message === \"wrong_password\") {\n        setPasswordError(\"Wrong password\");\n      }\n    }\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign in\n        </Typography>\n        <form className={classes.form} onSubmit={handleOnSubmit}>\n          <TextField\n            required\n            fullWidth\n            label=\"Email Address\"\n            autoFocus\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            error={!!emailError}\n            helperText={emailError}\n          />\n          <TextField\n            required\n            fullWidth\n            label=\"Password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            error={!!passwordError}\n            helperText={passwordError}\n          />\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Sign In\n          </Button>\n        </form>\n      </div>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}