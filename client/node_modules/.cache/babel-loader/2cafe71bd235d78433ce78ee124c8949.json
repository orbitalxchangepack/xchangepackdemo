{"ast":null,"code":"import _regeneratorRuntime from\"/usr/local/lib/node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/usr/local/lib/node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/usr/local/lib/node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*routing for Ask! Forum pages*/import React,{useState,useEffect}from\"react\";import AuthContext from\"./components/Ask/Contexts/AuthContext\";import{BrowserRouter as Router,Switch,Route,Redirect}from\"react-router-dom\";import axios from\"axios\";import Navbar from\"./components/Ask/Components/Navbar\";import Homepage from\"./components/Ask/Pages/Homepage/Homepage\";import Login from\"./components/Ask/Pages/Auth/Login\";import Register from\"./components/Ask/Pages/Auth/Register\";import CreateCategory from\"./components/Ask/Pages/Category/CreateCategory\";import BrowseCategories from\"./components/Ask/Pages/Category/BrowseCategories\";import ShowCategory from\"./components/Ask/Pages/Category/ShowCategory\";import CreateForum from\"./components/Ask/Pages/Forum/CreateForum\";import ShowForum from\"./components/Ask/Pages/Forum/ShowForum\";import CreateThread from\"./components/Ask/Pages/Thread/CreateThread\";import ShowThread from\"./components/Ask/Pages/Thread/ShowThread\";function AppAsk(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isInitiated=_useState4[0],setIsInitiated=_useState4[1];useEffect(function(){init();},[]);var init=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,response,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");_context.next=3;return axios.get(\"/api/auth/init\",{params:{token:token}});case 3:response=_context.sent;user=response.data.user;setUser(user);setIsInitiated(true);case 7:case\"end\":return _context.stop();}}},_callee);}));return function init(){return _ref.apply(this,arguments);};}();var handleLogout=function handleLogout(){setUser(null);localStorage.setItem(\"token\",null);};return/*#__PURE__*/React.createElement(\"div\",null,isInitiated&&/*#__PURE__*/React.createElement(AuthContext.Provider,{value:{user:user,setUser:setUser,handleLogout:handleLogout}},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/Ask\",exact:true,component:Homepage}),/*#__PURE__*/React.createElement(Route,{path:\"/auth/login\"},!user?/*#__PURE__*/React.createElement(Login,null):/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})),/*#__PURE__*/React.createElement(Route,{path:\"/auth/register\"},!user?/*#__PURE__*/React.createElement(Register,null):/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})),/*#__PURE__*/React.createElement(Route,{path:\"/category/create\"},user?/*#__PURE__*/React.createElement(CreateCategory,null):/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/login\"})),/*#__PURE__*/React.createElement(Route,{path:\"/category/:id\"},/*#__PURE__*/React.createElement(ShowCategory,null)),/*#__PURE__*/React.createElement(Route,{path:\"/category\"},/*#__PURE__*/React.createElement(BrowseCategories,null)),/*#__PURE__*/React.createElement(Route,{path:\"/forum/create/:id\"},user?/*#__PURE__*/React.createElement(CreateForum,null):/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/login\"})),/*#__PURE__*/React.createElement(Route,{path:\"/forum/:id\"},/*#__PURE__*/React.createElement(ShowForum,null)),/*#__PURE__*/React.createElement(Route,{path:\"/thread/create/:id\"},user?/*#__PURE__*/React.createElement(CreateThread,null):/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/login\"})),/*#__PURE__*/React.createElement(Route,{path:\"/thread/:id\"},/*#__PURE__*/React.createElement(ShowThread,null))))));}export default AppAsk;","map":{"version":3,"sources":["/Users/CHLY/Downloads/xchangepack/client/src/AppAsk.js"],"names":["React","useState","useEffect","AuthContext","BrowserRouter","Router","Switch","Route","Redirect","axios","Navbar","Homepage","Login","Register","CreateCategory","BrowseCategories","ShowCategory","CreateForum","ShowForum","CreateThread","ShowThread","AppAsk","user","setUser","isInitiated","setIsInitiated","init","token","localStorage","getItem","get","params","response","data","handleLogout","setItem"],"mappings":"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","sourcesContent":["/*routing for Ask! Forum pages*/\nimport React, { useState, useEffect } from \"react\";\nimport AuthContext from \"./components/Ask/Contexts/AuthContext\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport axios from \"axios\";\nimport Navbar from \"./components/Ask/Components/Navbar\";\n\nimport Homepage from \"./components/Ask/Pages/Homepage/Homepage\";\nimport Login from \"./components/Ask/Pages/Auth/Login\";\nimport Register from \"./components/Ask/Pages/Auth/Register\";\nimport CreateCategory from \"./components/Ask/Pages/Category/CreateCategory\";\nimport BrowseCategories from \"./components/Ask/Pages/Category/BrowseCategories\";\nimport ShowCategory from \"./components/Ask/Pages/Category/ShowCategory\";\nimport CreateForum from \"./components/Ask/Pages/Forum/CreateForum\";\nimport ShowForum from \"./components/Ask/Pages/Forum/ShowForum\";\nimport CreateThread from \"./components/Ask/Pages/Thread/CreateThread\";\nimport ShowThread from \"./components/Ask/Pages/Thread/ShowThread\";\n\nfunction AppAsk() {\n  const [user, setUser] = useState(null);\n  const [isInitiated, setIsInitiated] = useState(false);\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const init = async () => {\n    const token = localStorage.getItem(\"token\");\n    const response = await axios.get(\"/api/auth/init\", { params: { token } });\n    const { user } = response.data;\n    setUser(user);\n    setIsInitiated(true);\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    localStorage.setItem(\"token\", null);\n  };\n\n  return (\n    <div>\n      {isInitiated && (\n        <AuthContext.Provider value={{ user, setUser, handleLogout }}>\n          <Router>\n            <Navbar />\n            <Switch>\n              <Route path=\"/Ask\" exact component={Homepage} />\n              <Route path=\"/auth/login\">\n                {!user ? <Login /> : <Redirect to=\"/\" />}\n              </Route>\n              <Route path=\"/auth/register\">\n                {!user ? <Register /> : <Redirect to=\"/\" />}\n              </Route>\n              <Route path=\"/category/create\">\n                {user ? <CreateCategory /> : <Redirect to=\"/auth/login\" />}\n              </Route>\n              <Route path=\"/category/:id\">\n                <ShowCategory />\n              </Route>\n              <Route path=\"/category\">\n                <BrowseCategories />\n              </Route>\n              <Route path=\"/forum/create/:id\">\n                {user ? <CreateForum /> : <Redirect to=\"/auth/login\" />}\n              </Route>\n              <Route path=\"/forum/:id\">\n                <ShowForum />\n              </Route>\n              <Route path=\"/thread/create/:id\">\n                {user ? <CreateThread /> : <Redirect to=\"/auth/login\" />}\n              </Route>\n              <Route path=\"/thread/:id\">\n                <ShowThread />\n              </Route>\n            </Switch>\n          </Router>\n        </AuthContext.Provider>\n      )}\n    </div>\n  );\n}\n\nexport default AppAsk;\n"]},"metadata":{},"sourceType":"module"}